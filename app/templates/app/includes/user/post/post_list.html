{% load static %}

{% for post in posts %}

<article class="card-post" id="#card-post-{{ post.id }}">
    
    <figure class="card-post__featured-image">
        <img
            class="img"
            src="{{ post.featured_image }}"
            alt="{{ post.title }}" />
    </figure>
    
    <div class="card-post__content">

        {% if user == post.user_profile.user and isProfileDetailView %}

            <div class="card-post__user">

                <button type="button" class="btn-chip btn-chip--neutral" data-modal-actions-target="#modal-actions-{{ post.id }}">
                    <svg class="icon icon-24">
                        <use xlink:href="{% static 'app/assets/icons/sprite.svg' %}#icon-dots-vertical-rounded"></use>
                    </svg>
                </button>

                <div class="modal-actions" id="modal-actions-{{ post.id }}">

                    <button type="button" class="btn-chip btn-chip--neutral">
                        <svg class="icon icon-24">
                            <use xlink:href="{% static 'app/assets/icons/sprite.svg' %}#icon-edit"></use>
                        </svg>
                        <span>Edit</span>
                    </button>

                    <button type="button" class="btn-chip btn-chip--danger">
                        <svg class="icon icon-24">
                            <use xlink:href="{% static 'app/assets/icons/sprite.svg' %}#icon-trash"></use>
                        </svg>
                        <span>Delete</span>
                    </button>
        
                </div>

            </div>

        {% endif %}
        
        {% if not isProfileDetailView %}
            <div class="card-post__user">
                {% include 'app/includes/user/components/card_user.html' with user=post.user_profile.user %}
            </div>
        {% endif %}

        <h3 class="card-post__title heading-2">{{ post.title }}</h3>

        <span class="card-post__date-created text-s">{{ post.date_created }}</span>

        <p class="card-post__excerpt text-l">{{ post.excerpt }}</p>

        <div class="card-post__tags">

            {% for tag in post.tags.all %}
                <a
                    href="{{ tag.get_absolute_url }}"
                    class="card-post__tag text-s">
                    #{{ tag }}
                </a>
            {% endfor %}

        </div>

        <a
            href="{{ post.get_absolute_url }}"
            class="btn">
            Start reading
        </a>

    </div>

</article>

{% endfor %}

{% include 'app/includes/misc/pagination/pagination.html' %}
