{% load static %}

{% for post in posts %}

<article class="card-post" id="#card-post-{{ post.id }}">
    
    <figure class="card-post__container-featured-image">
        <div class="card-post__wrapper-featured-image">
            <img
                class="img"
                src="{{ post.featured_image }}"
                alt="{{ post.title }}" />
        </div>
    </figure>
    
    <div class="card-post__content">

        {% if user == post.user_profile.user and isProfileDetailView %}

            <div class="card-post__user-actions">

                <button type="button" class="button button--small button--invisible" data-modal-actions-target="#modal-actions-{{ post.id }}">
                    <svg class="icon icon-24">
                        <use xlink:href="{% static 'app/assets/icons/sprite.svg' %}#icon-dots-vertical-rounded"></use>
                    </svg>
                </button>

                <div class="modal-actions" id="modal-actions-{{ post.id }}">

                    <button type="button" class="button button--small button--neutral">
                        <svg class="icon icon-24">
                            <use xlink:href="{% static 'app/assets/icons/sprite.svg' %}#icon-edit"></use>
                        </svg>
                        <span>Edit</span>
                    </button>

                    <button type="button" class="button button--small button--danger">
                        <svg class="icon icon-24">
                            <use xlink:href="{% static 'app/assets/icons/sprite.svg' %}#icon-trash"></use>
                        </svg>
                        <span>Delete</span>
                    </button>
        
                </div>

            </div>

        {% endif %}
        
        {% if not isProfileDetailView %}
            
            {% include 'app/includes/member/profile/misc/card_member.html' with member=post.user_profile.user %}
            
        {% endif %}

        <h3 class="card-post__title heading-2">{{ post.title }}</h3>

        <span class="card-post__date-created text-small">{{ post.date_created | date }}</span>

        <p class="card-post__excerpt text-large">{{ post.excerpt }}</p>

        <div class="card-post__container-tags">

            {% for tag in post.tags.all %}
                <a
                    href="{{ tag.get_absolute_url }}"
                    class="card-post__tag link link--text">
                    #{{ tag }}
                </a>
            {% endfor %}

        </div>

        <a
            href="{{ post.get_absolute_url }}"
            class="link link--large link--button-primary">
            Start reading
        </a>

    </div>

</article>

{% endfor %}

{% include 'app/includes/misc/pagination.html' %}
